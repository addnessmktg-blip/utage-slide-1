# UTAGE & YouTube Video Downloader (Chrome拡張機能)

UTAGEで埋め込まれている動画や、YouTubeを含む一般的なHTML5動画に「Download」ボタンを追加するシンプルな拡張機能です。動画の`src`/`source`から直接アクセスできる再生URLを取得できた場合にChromeのダウンロードマネージャーを使って保存します。

> **重要な制限**
> - 再生用の直接URLが取得できない場合（DRM付き、ストリーミング分割、YouTubeの保護付きプレイヤーなど）はダウンロードできません。
> - iframe越しで`video`要素にアクセスできない場合もボタンは表示されません。

## セットアップ手順（デベロッパーモード）
1. 本リポジトリを取得します。
2. Chrome/Edgeの拡張機能ページを開き、右上の「デベロッパーモード」をオンにします。
3. 「パッケージ化されていない拡張機能を読み込む」をクリックし、このリポジトリ内の`extension`フォルダを選択します。
4. 読み込み後、対象ページ（UTAGEのページやYouTubeなど）を開くと、動画右下に「Download」ボタンが表示されます。

## 使い方
- ボタンをクリックするとダウンロードダイアログが開き、保存場所を選択できます。
- ボタンが出ない/失敗する場合は、ページ内の`video`要素に直接アクセスできるURLがない可能性があります。

## 構成
- `manifest.json`: MV3 マニフェスト。
- `background.js`: ダウンロード要求を受け取り、ファイル名を生成して保存処理を実行。
- `content-script.js`: ページ上の`video`を検出し、「Download」ボタンとトースト通知を提供。
- `styles.css`: ボタンと通知のスタイル。
